{% load otis_extras %}

{% if curriculum %}

<p>
<button id="hide-completed-units">Toggle completed</button>
<button id="hide-locked-units">Toggle locked</button>
</p>
<script>
$("#hide-completed-units").click(function() {
	$(".unit-completed").toggle();
});
$("#hide-locked-units").click(function() {
	$(".unit-locked").toggle();
});
</script>

<table class="table curriculum">
{% for row in curriculum %}
<tr class="subject{{ row.unit.group.subject }}{% if row.is_complete %} unit-completed{% endif %}{% if not row.is_visible %} unit-locked{% endif %}">
	<th class="number" >{{ row.number }}</th>
	<td class="icon">
	{% if row.is_complete and row.is_current%}
		‚è≥
	{% elif row.is_current %}
		‚ñ∂Ô∏è
	{% elif row.is_complete %}
		‚úÖ
	{% endif %}
	</td>

	{# Handout #}
	<td class="code">{{ row.unit.position }} {{ row.unit.code }}</td>
	{% if row.is_visible %}
		<td><a href="{% view_problems row.unit %}"
			   {% if not row.is_complete %}class="active"{% endif %}>
			{{ row.unit.group.name }}
			</a></td>
	{% else %}
		<td>{{ row.unit.group.name }}</td>
	{% endif %}

	{# File uploads #}
	{% if row.is_visible or row.num_uploads > 0 %}
		<td class="righticon"><a href="{% url "uploads" student.id row.unit.id %}">
			üìÇ √ó{{ row.num_uploads }}</a></td>
	{% else %}
		<td class="righticon">&mdash;</td>
	{% endif %}

	{# Solutions #}
	{% if row.sols_label %}
		<td class="righticon"><a href="{% view_solutions row.unit %}">{{ row.sols_label }}</a></td>
	{% else %}
		<td class="righticon">&mdash;</td>
	{% endif %}

	{# Suggest #}
	{% if row.is_visible %}
		<td class="righticon">
			<a href="{% url "suggest-new" student.id row.unit.id %}">‚ûï</a>
		</td>
	{% else %}
		<td class="righticon">&mdash;</td>
	{% endif %}
</tr>
{% endfor %}
</table>
{% else %}
<i>No curriculum materials yet! Please check back later.</i>

{% endif %}
