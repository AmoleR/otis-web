{% extends 'layout.html' %}
{% block layout-content %}

{% if omnsicient %}
<p>Viewing {{ student.name }} in teacher mode.</p>
{% else %}
<p>Hi {{ student.name }}, welcome back to {{ student.semester.name }}.
You have completed {{ student.current_unit_index }} units.</p>
{% endif %}

<h2>Curriculum Materials</h2>
<p>The current unit is marked with a &star;.
Completed units are marked with &check;.</p>
<table class="table">
{% for unit in curriculum %}
<tr class="subject{{ unit.subject }}">
	<th>{{ forloop.counter }}</th>
	<td>{% if forloop.counter0 < student.current_unit_index %}
		&check;
	{% elif forloop.counter0 == student.current_unit_index %}
		&star;
	{% endif %}</td>
	<td>{{ unit.name }}</td>
	<td>{{ unit.code }}</td>
	<td><a href="{{ unit.prob_url }}">Handout</a></td>
	{# Whether to show uploads #}
	{% if forloop.counter0 <= student.current_unit_index %}
	<td><a href="{% url "uploads" student.id unit.id %}">File Uploads</a></td>
	{% else %}
	<td></td>
	{% endif %}
	{# Whether to show oslutions #}
	{% if forloop.counter0 < student.current_unit_index %}
	<td><a href="{{ unit.soln_url }}">Solution Notes</a></td>
	{% elif omniscient and forloop.counter0 <= student.current_unit_index %}
	<td><a href="{{ unit.soln_url }}">Draft Solutions</a></td>
	{% else %}
	<td></td>
	{% endif %}
</tr>
{% endfor %}
</table>

<p>Link to <a href="{% url "uploads" student.id 0 %}">miscellaneous uploads</a>.</p>

{% if omniscient or debug %}
I AM SENSEI
{% endif %}
{% if user.is_staff or debug %}
<p>(Admin) <a href="{% url "curredit" student.id %}">Edit this curriculum</a>.</p>
{% endif %}

<hr />

<h2>Mock Olympiad</h2>
Submit these to <a href="http://www.gradescope.com">GradeScope</a>.

<table class="table">
{% for oly in olympiads %}
<tr>
	<th>{{ forloop.counter }}</th>
	<td>{{ oly }}</td>
	<td>{% if oly.jmo_url %}<a href="{{oly.jmo_url}}">JMO</a>{% endif %}</td>
	<td>{% if oly.usamo_url %}<a href="{{oly.usamo_url}}">USAMO</a>{% endif %}</td>
	<td>{% if oly.soln_url %}<a href="{{oly.soln_url}}">Solutions</a>{% endif %}</td>
	<td>Due {{ oly.due_date|date:"DATE_FORMAT" }}</td>
</tr>
{% endfor %}
</table>
<hr />

<h2>Practice HMMT</h2>
Submit these to <a href="http://www.gradescope.com">GradeScope</a>.
<table class="table">
{% for assn in assignments %}
<tr>
	<th>{{ forloop.counter }}</th>
	<td>{{ assn }}</td>
	<td>Due {{ assn.due_date|date:"DATE_FORMAT" }}</td>
</tr>
{% endfor %}
</table>
<hr />

{% endblock %}
