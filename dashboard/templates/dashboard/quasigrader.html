{% extends 'layout.html' %}
{% load static %}
{% load humanize %}

{% block layout-content %}
{% if inquiry_nag > 0 %}
<div class="alert alert-warning alert-dismissible" role="alert">
There are
<a href="{% url "list-inquiry" %}" class="alert-link">
	{{ inquiry_nag }} unit inquiries</a>
which haven't been answered yet.
<button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
</button>
</div>
{% endif %}

<p>There are {{ items|length }} problem sets
from the last {{ num_hours }} hours
which apparently haven't been completely processed yet.
They are listed below.</p>

<table class="table">
{% for item in items %}
<tr>
	<th>
		#{{ forloop.counter }}
		<a target="_blank"
			href="{% url 'auto-advance' item.student.id item.file.unit.id %}">&#x26d1;</a>
	</th>
	<td>
	<a href="{{item.file.url}}"><tt>{{ item.filename }}</tt></a>
	</td>
	<td>
		<a href="{% url 'advance' item.student.id %}">
			&#x2694; {{ item.student.name }}</a></td>
	<td style="font-size:90%;">{{ item.file.unit }}</td>
</tr>
<tr>
	<td></td>
	<td style="font-size:90%;">{{ item.file.created_at|naturaltime }}</td>
	<td>{% if item.student.assistant %}<b>(+ {{item.student.assistant.shortname}})</b>{% endif %}</td>
	<td>{{ item.num_done }} of {{ item.num_psets }}</td>
</tr>
{% endfor %}
</table>

{% endblock %}
